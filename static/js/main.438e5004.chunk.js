(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,r){},40:function(e,t,r){},73:function(e,t,r){},74:function(e,t,r){},75:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),s=r(17),a=r.n(s),i=(r(39),r(40),r(6)),o=r(2),u=r(4),l=r.n(u),j=r(10),d=r(12),b=r.n(d),g="https://only-login.herokuapp.com",h=r(14),p=Object(h.b)({name:"auth",initialState:{login:{currentUser:void 0,isFeching:!0,error:!1},register:{isFeching:!1,error:!1,success:!1}},reducers:{loginStart:function(e){e.login.isFeching=!0},loginSuccess:function(e,t){e.login.isFeching=!1,e.login.error=!1,e.login.currentUser=t.payload},loginFailed:function(e){e.login.isFeching=!1,e.login.error=!0},logoutStart:function(e){e.login.isFeching=!0},logoutSuccess:function(e){e.login.isFeching=!1,e.login.error=!1,e.login.currentUser=null},logoutFailed:function(e){e.login.isFeching=!1,e.login.error=!0},registerStart:function(e){e.register.isFeching=!0},registerSuccess:function(e){e.register.isFeching=!1,e.register.error=!1,e.register.success=!0},registerFailed:function(e){e.register.isFeching=!1,e.register.error=!0,e.register.success=!1}}}),v=p.actions,f=v.loginStart,O=v.loginSuccess,x=v.loginFailed,m=v.registerStart,S=v.registerSuccess,k=v.registerFailed,F=v.logoutStart,y=v.logoutSuccess,w=v.logoutFailed,U=p.reducer,N=Object(h.b)({name:"user",initialState:{users:{allUser:null,isFeching:!1,error:!1},messages:""},reducers:{getAllUserStart:function(e){e.users.isFeching=!0},getAllUserSuccess:function(e,t){e.users.isFeching=!1,e.users.error=!1,e.users.allUser=t.payload},getAllUserFailed:function(e){e.users.isFeching=!1,e.users.error=!0},deleteUserStart:function(e){e.users.isFeching=!0},deleteUserSuccess:function(e,t){e.users.isFeching=!1,e.users.error=!1,e.messages=t.payload},deleteUserFailed:function(e,t){e.users.isFeching=!1,e.users.error=!0,e.messages=t.payload}}}),A=N.actions,E=A.getAllUserStart,C=A.getAllUserSuccess,T=A.getAllUserFailed,D=A.deleteUserStart,B=A.deleteUserSuccess,R=A.deleteUserFailed,L=N.reducer,_=function(){var e=Object(j.a)(l.a.mark((function e(t,r,n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(f()),e.prev=1,e.next=4,b.a.post("".concat(g,"/v1/auth/login"),t);case 4:c=e.sent,r(O(c.data)),n("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(x());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(l.a.mark((function e(t,r,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(m()),e.prev=1,e.next=4,b.a.post("".concat(g,"/v1/auth/register"),t);case 4:r(S()),n("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r(k());case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(j.a)(l.a.mark((function e(t,r,n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(E()),e.prev=1,e.next=4,b.a.get("".concat(g,"/v1/user/").concat(n),{headers:{token:"Bearer ".concat(r)}});case 4:c=e.sent,t(C(c.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(T());case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(l.a.mark((function e(t,r,n,c){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D()),e.prev=1,e.next=4,c.delete("".concat(g,"/v1/user/").concat(n),{headers:{token:"Bearer ".concat(r)}});case 4:s=e.sent,t(B(s.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(R(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n,c){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(l.a.mark((function e(t,r,n,c,s){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(F()),e.prev=1,e.next=4,s.post("".concat(g,"/v1/auth/logout"),r,{headers:{token:"Bearer ".concat(c)}});case 4:t(y()),n("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(w(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n,c,s){return e.apply(this,arguments)}}(),J=r(15),W=r(32),q=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("".concat(g,"/v1/auth/refresh"),{withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),z=function(e,t,r){var n=b.a.create();return n.interceptors.request.use(function(){var n=Object(j.a)(l.a.mark((function n(c){var s,a,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=new Date,!(Object(W.a)(null===e||void 0===e?void 0:e.accessToken).exp<s.getTime()/1e3)){n.next=9;break}return n.next=5,q();case 5:a=n.sent,i=Object(J.a)(Object(J.a)({},e),{},{accessToken:a.accessToken}),t(r(i)),c.headers.token="Bearer ".concat(a.accessToken);case 9:return n.abrupt("return",c);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),n},G=r(1),K=function(){var e=Object(i.c)((function(e){return e.auth.login.currentUser})),t=Object(i.c)((function(e){return e.users.users.allUser})),r=Object(i.c)((function(e){var t;return null===(t=e.users)||void 0===t?void 0:t.messages})),c=null===e||void 0===e?void 0:e.accessToken,s=null===e||void 0===e?void 0:e._id,a=Object(i.b)(),u=Object(o.f)(),l=z(e,a,O);return Object(n.useEffect)((function(){e||u("/login"),(null===e||void 0===e?void 0:e.accessToken)&&P(a,c,s,l)}),[]),Object(G.jsxs)("main",{className:"home-container",children:[Object(G.jsx)("div",{className:"home-title",children:"User List"}),Object(G.jsx)("div",{className:"home-userlist",children:null===t||void 0===t?void 0:t.map((function(e){return Object(G.jsxs)("div",{className:"user-container",children:[Object(G.jsxs)("div",{className:"home-user",children:[e.username," ",s===e._id?"(B\u1ea1n)":""]}),Object(G.jsx)("div",{className:"delete-user",onClick:function(){return t=e._id,void H(a,c,t,l);var t},children:" Delete "})]},e._id)}))}),r]})},Q=r(9),V=r(7),X=(r(73),function(){var e=Object(n.useState)(""),t=Object(V.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(""),a=Object(V.a)(s,2),u=a[0],l=a[1],j=Object(i.b)(),d=Object(o.f)();return Object(G.jsxs)("section",{className:"login-container",children:[Object(G.jsx)("div",{className:"login-title",children:" Log in"}),Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_({username:r,password:u},j,d)},children:[Object(G.jsx)("label",{children:"USERNAME"}),Object(G.jsx)("input",{type:"text",placeholder:"Enter your username",value:r,onChange:function(e){return c(e.target.value)}}),Object(G.jsx)("label",{children:"PASSWORD"}),Object(G.jsx)("input",{type:"password",placeholder:"Enter your password",value:u,onChange:function(e){return l(e.target.value)}}),Object(G.jsx)("button",{type:"submit",children:" Continue "})]}),Object(G.jsx)("div",{className:"login-register",children:" Don't have an account yet? "}),Object(G.jsx)(Q.b,{className:"login-register-link",to:"/register",children:"Register one for free "})]})}),Y=(r(74),function(){var e=Object(n.useState)(""),t=Object(V.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(""),a=Object(V.a)(s,2),u=a[0],l=a[1],j=Object(n.useState)(""),d=Object(V.a)(j,2),b=d[0],g=d[1],h=Object(i.b)(),p=Object(o.f)();return Object(G.jsxs)("section",{className:"register-container",children:[Object(G.jsx)("div",{className:"register-title",children:" Sign up "}),Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),M({username:r,email:u,password:b},h,p)},children:[Object(G.jsx)("label",{children:"EMAIL"}),Object(G.jsx)("input",{type:"text",placeholder:"Enter your email",value:u,onChange:function(e){return l(e.target.value)}}),Object(G.jsx)("label",{children:"USERNAME"}),Object(G.jsx)("input",{type:"text",placeholder:"Enter your username",value:r,onChange:function(e){return c(e.target.value)}}),Object(G.jsx)("label",{children:"PASSWORD"}),Object(G.jsx)("input",{type:"password",placeholder:"Enter your password",value:b,onChange:function(e){return g(e.target.value)}}),Object(G.jsx)("button",{type:"submit",children:" Create account "})]})]})}),Z=(r(75),function(){var e=Object(i.c)((function(e){var t;return null===(t=e.auth.login)||void 0===t?void 0:t.currentUser})),t=null===e||void 0===e?void 0:e._id,r=Object(i.b)(),n=Object(o.f)(),c=z(e,r,y);return Object(G.jsx)("nav",{className:"navbar-container",children:e?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Q.b,{to:"/home",className:"navbar-home",children:" Home "}),Object(G.jsxs)("p",{className:"navbar-user",children:["Hi, ",Object(G.jsxs)("span",{children:[" ",e.username,"  "]})," "]}),Object(G.jsx)(Q.b,{to:"/logout",className:"navbar-logout",onClick:function(){I(r,t,n,null===e||void 0===e?void 0:e.accessToken,c),r(B(""))},children:" Log out"})]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Q.b,{to:"/login",className:"navbar-login",children:" Login "}),Object(G.jsx)(Q.b,{to:"/register",className:"navbar-register",children:" Register"})]})})});var $=function(){return Object(G.jsxs)(Q.a,{children:[Object(G.jsx)(Z,{}),Object(G.jsx)("div",{className:"App",children:Object(G.jsxs)(o.c,{children:[Object(G.jsx)(o.a,{path:"/home",element:Object(G.jsx)(K,{})}),Object(G.jsx)(o.a,{path:"/login",element:Object(G.jsx)(X,{})}),Object(G.jsx)(o.a,{path:"/register",element:Object(G.jsx)(Y,{})})]})})]})},ee=r(33),te=r(5),re=r(11),ne=r(34),ce={key:"root",version:1,storage:r.n(ne).a},se=Object(te.b)({auth:U,users:L}),ae=Object(re.g)(ce,se),ie=Object(h.a)({reducer:ae,middleware:function(e){return e({serializableCheck:{ignoredActions:[re.a,re.f,re.b,re.c,re.d,re.e]}})}}),oe=Object(re.h)(ie);a.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(i.a,{store:ie,children:Object(G.jsx)(ee.a,{loading:null,persistor:oe,children:Object(G.jsx)($,{})})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.438e5004.chunk.js.map